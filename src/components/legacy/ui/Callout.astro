---
export type CalloutVariant = 'info' | 'warning' | 'danger' | 'success';

export interface Props {
  variant?: CalloutVariant;
  compact?: boolean;
  class?: string;
  ariaLabel?: string;
  iconClass?: string;
}

const {
  variant = 'info',
  compact = false,
  class: className = '',
  ariaLabel,
  iconClass,
} = Astro.props as Props;

const classes = ['notice', `notice--${variant}`, compact ? 'notice--compact' : '', className]
  .filter(Boolean)
  .join(' ');

const defaultIcon: Record<CalloutVariant, string> = {
  info: 'fa-solid fa-circle-info',
  warning: 'fa-solid fa-triangle-exclamation',
  danger: 'fa-solid fa-circle-xmark',
  success: 'fa-solid fa-circle-check',
};

const label = ariaLabel ?? (variant === 'warning' ? 'Wichtiger Hinweis' : 'Hinweis');
---

<div class={classes} role="note" aria-label={label}>
  <i aria-hidden="true" class={iconClass ?? defaultIcon[variant]}></i>
  <slot />
</div>
