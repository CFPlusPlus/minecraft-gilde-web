@import 'tailwindcss';

/*
  v2 Design Tokens (clean + subtle glass + minimal)
  - Auto Light/Dark via prefers-color-scheme
  - Optional manual override via: html[data-theme="light|dark"]
  - Anthrazit (nicht reines Schwarz) + Gold Accent
*/

:root {
  /* Typography */
  --font-sans:
    'Geist Variable', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial,
    'Apple Color Emoji', 'Segoe UI Emoji';
  --font-display:
    'Space Grotesk Variable', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica,
    Arial;

  /* Light */
  --bg: #f7f8fb;
  --fg: #0f1826;
  --muted: #475569;

  --surface: rgba(255, 255, 255, 0.72);
  --surface-solid: #ffffff;
  --border: rgba(15, 23, 42, 0.1);

  --accent: #f2c94c;
  --accent2: #ffd56a;
  --ring: rgba(242, 201, 76, 0.45);

  --radius: 16px;
}

@media (prefers-color-scheme: dark) {
  :root {
    /* Dark (Obsidian / Anthrazit) */
    --bg: #0b0f14;
    --fg: #e5e7eb;
    --muted: #a1a1aa;

    --surface: rgba(17, 21, 27, 0.6);
    --surface-solid: #11151b;
    --border: rgba(255, 255, 255, 0.1);

    --accent: #f2c94c;
    --accent2: #ffd56a;
    --ring: rgba(242, 201, 76, 0.3);
  }
}

/* Manual override (set by v2 theme toggle) */
html[data-theme='light'] {
  --bg: #f7f8fb;
  --fg: #0f172a;
  --muted: #475569;

  --surface: rgba(255, 255, 255, 0.72);
  --surface-solid: #ffffff;
  --border: rgba(15, 23, 42, 0.1);

  --accent: #f2c94c;
  --accent2: #ffd56a;
  --ring: rgba(242, 201, 76, 0.45);
}

html[data-theme='dark'] {
  --bg: #0b0f14;
  --fg: #e5e7eb;
  --muted: #a1a1aa;

  --surface: rgba(17, 21, 27, 0.6);
  --surface-solid: #11151b;
  --border: rgba(255, 255, 255, 0.1);

  --accent: #f2c94c;
  --accent2: #ffd56a;
  --ring: rgba(242, 201, 76, 0.3);
}

/* Map tokens into Tailwind v4 CSS-first theme variables */
@theme {
  --font-sans: var(--font-sans);
  --font-display: var(--font-display);

  --color-bg: var(--bg);
  --color-fg: var(--fg);
  --color-muted: var(--muted);

  --color-surface: var(--surface);
  --color-surface-solid: var(--surface-solid);
  --color-border: var(--border);

  --color-accent: var(--accent);
  --color-accent2: var(--accent2);
  --color-ring: var(--ring);

  --radius-lg: var(--radius);
}

@layer base {
  html {
    /* Allow UA to render controls appropriately, but we also
       override this in manual theme mode (see below). */
    color-scheme: light dark;
    scrollbar-gutter: stable;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  /* When the mobile menu is open, blur the page content (not the navbar) */
  html[data-menu-open='1'] main {
    filter: blur(12px);
    transform: translateZ(0);
  }

  /* When the user forces a theme via toggle, also force the UA color-scheme.
     This fixes things like the search "clear" button being the wrong color. */
  html[data-theme='light'] {
    color-scheme: light;
  }

  html[data-theme='dark'] {
    color-scheme: dark;
  }

  @media (prefers-color-scheme: dark) {
    html:not([data-theme]) {
      color-scheme: dark;
    }
  }

  @media (prefers-color-scheme: light) {
    html:not([data-theme]) {
      color-scheme: light;
    }
  }

  body {
    font-family: var(--font-sans);
  }

  h1,
  h2,
  h3,
  h4 {
    font-family: var(--font-display);
    letter-spacing: -0.02em;
  }

  :focus-visible {
    outline: none;
  }

  /* Link defaults */
  a {
    text-decoration-thickness: 1px;
    text-underline-offset: 3px;
  }

  code,
  kbd {
    font-family:
      ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New',
      monospace;
  }

  code {
    background: color-mix(in oklab, var(--surface-solid) 70%, transparent);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 0.12rem 0.45rem;
  }

  kbd {
    background: color-mix(in oklab, var(--surface-solid) 70%, transparent);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 0.12rem 0.45rem;
    box-shadow: 0 1px 0 color-mix(in oklab, var(--fg) 10%, transparent);
  }
}

@layer utilities {
  /* Subtle glass surface helper */
  .glass {
    background: var(--surface);
    border: 1px solid var(--border);
    backdrop-filter: blur(12px);
  }

  /* Stronger glass (used for overlays / mobile navigation panel) */
  .glass-strong {
    background: color-mix(in oklab, var(--surface-solid) 94%, transparent);
    border: 1px solid var(--border);
    backdrop-filter: blur(24px);
  }

  /* Project design-system aliases ("mg" = Minecraft Gilde). */
  .mg-container {
    @apply mx-auto max-w-6xl px-4;
  }

  .mg-section {
    @apply py-10;
  }

  .mg-card {
    @apply bg-surface border-border rounded-[var(--radius)] border shadow-sm backdrop-blur-md;
  }

  .mg-muted {
    color: var(--muted);
  }

  .mg-prose {
    line-height: 1.75;
  }

  .v2-container {
    @apply mx-auto max-w-6xl px-4;
  }

  .v2-section {
    @apply py-10;
  }

  .v2-card {
    @apply bg-surface border-border rounded-[var(--radius)] border shadow-sm backdrop-blur-md;
  }

  .v2-muted {
    color: var(--muted);
  }

  .v2-prose,
  .mg-prose {
    line-height: 1.75;
  }

  .v2-prose h2,
  .mg-prose h2 {
    font-size: 1.25rem;
    margin-top: 1.75rem;
    margin-bottom: 0.75rem;
  }

  .v2-prose h3,
  .mg-prose h3 {
    font-size: 1.05rem;
    margin-top: 1.25rem;
    margin-bottom: 0.5rem;
  }

  .v2-prose p,
  .mg-prose p {
    margin: 0.75rem 0;
    color: color-mix(in oklab, var(--fg) 92%, transparent);
  }

  .v2-prose ul,
  .v2-prose ol,
  .mg-prose ul,
  .mg-prose ol {
    margin: 0.75rem 0;
    padding-left: 1.25rem;
    color: color-mix(in oklab, var(--fg) 92%, transparent);
  }

  .v2-prose li,
  .mg-prose li {
    margin: 0.35rem 0;
  }

  .v2-prose a,
  .mg-prose a {
    color: color-mix(in oklab, var(--accent) 85%, var(--fg) 15%);
    text-decoration: underline;
    text-decoration-color: color-mix(in oklab, var(--accent) 45%, transparent);
  }

  /* Accordion */
  .v2-accordion,
  .mg-accordion {
    @apply bg-surface border-border rounded-[var(--radius)] border p-4 shadow-sm backdrop-blur-md;
  }

  .v2-accordion summary,
  .mg-accordion summary {
    list-style: none;
    cursor: pointer;
    user-select: none;
  }

  .v2-accordion summary::-webkit-details-marker,
  .mg-accordion summary::-webkit-details-marker {
    display: none;
  }

  .v2-accordion[open],
  .mg-accordion[open] {
    box-shadow: 0 12px 30px color-mix(in oklab, var(--fg) 12%, transparent);
  }

  /* Simple "callout" */
  .v2-callout,
  .mg-callout {
    /* Match the site's "glass card" language: uniform border, soft shadow, readable content. */
    @apply bg-surface border-border rounded-[var(--radius)] border p-4 shadow-sm backdrop-blur-md;
  }

  .mg-callout__icon {
    @apply bg-accent/15 text-accent mt-0.5 flex h-9 w-9 shrink-0 items-center justify-center rounded-xl;
  }

  .mg-callout[data-variant='warning'] .mg-callout__icon {
    @apply bg-accent/20;
  }

  .v2-callout[data-variant='warning'],
  .mg-callout[data-variant='warning'] {
    border-color: color-mix(in oklab, var(--accent) 60%, var(--border) 40%);
    background: color-mix(in oklab, var(--accent) 10%, var(--surface) 90%);
  }

  .v2-callout[data-variant='info'],
  .mg-callout[data-variant='info'] {
    border-color: color-mix(in oklab, var(--accent) 18%, var(--border) 82%);
    background: color-mix(in oklab, var(--surface) 85%, transparent);
  }
}
