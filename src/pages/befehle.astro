---
import BaseLayout from '../layouts/BaseLayout.astro';
import Navbar from '../components/Navbar.astro';
import Footer from '../components/Footer.astro';
import SectionHeader from '../components/ui/SectionHeader.astro';
import { getEntry } from 'astro:content';

const entry = await getEntry('commands', 'list');
if (!entry) throw new Error('Missing commands content: src/content/commands/list.json');
const categories = entry.data.categories;
---

<BaseLayout
  title="Minecraft Gilde - Server-Befehle"
  canonical="https://minecraft-gilde.de/befehle.html"
  bodyClass="page--sticky-footer page--subpage page--content"
  styles={['/css/content-page.css', '/css/befehle.css']}
  scripts={['/js/befehle.js']}
>
  <Navbar active="befehle" />

  <main id="main-content" tabindex="-1">
    <!--Header-->
    <SectionHeader titleHtml="Server <span>Befehle</span>" />

    <!--Inhalt-->
    <section id="page-content">
      <div class="content">
        <div class="search-wrapper search-wrapper--commands">
          <i aria-hidden="true" class="fa-solid fa-magnifying-glass"></i>
          <input
            aria-label="Suche"
            id="searchInput"
            placeholder="Befehl oder Beschreibung suchen..."
            type="text"
          />
        </div>

        <div class="table-wrapper">
          <table id="commandsTable">
            <thead>
              <tr>
                <th>Kategorie</th>
                <th>Befehl</th>
                <th>Beschreibung</th>
              </tr>
            </thead>
            <tbody>
              {
                categories.map((cat) =>
                  cat.commands.map((cmd) => (
                    <tr>
                      <td>{cat.name}</td>
                      <td>{cmd.command}</td>
                      <td>{cmd.description}</td>
                    </tr>
                  )),
                )
              }
            </tbody>
          </table>
        </div>
      </div>
    </section>
  </main>

  <Footer />
</BaseLayout>
